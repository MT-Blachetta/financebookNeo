We want to add a feature in the banking App financeBook to configure and define transaction fees for each user. Every time a new payment item is created (added), deleted or modified, there are computed transaction fees
for the user depending on the payment amount. When a positive value income payment is added, we compute internally a transaction fee with the unsigned amount at the backend System and SUBSTRACT the fee amount from the payment value. So if you create a payment of 100 €, the actual saved amount (that's stored and displayed in the app) will be 100 € minus the transaction fee (e.g. 100-0.01 = 99,99) instead of the full amount. When a negative amount
is created, (for expenses) the Transaction fee is mathematically substracted, that means from the pure amount, the fees are added (e.g. -100-0.01 = -100,01). The logic for computing the Transaction fees is implemented in the backend code. If a payment is deleted, the Transaction fees are refunded and added back to the total balance. When the payment amount is modified, the Transaction fees have to be recomputed and the difference need to be added or substarcted accordingly.

Now how the Transaction fees are computed ? We store and calculate 3 variables for each different user. First we track the number of transactions or payment items for each user until now (current date). Then we define a query to get all payments which pure amounts are at least as high as a defined variable x. 
It selects all payments starting at amount x (e.g. all payments over 100). We count those payments and divide it with the total amount of payments to get the variable "payment frequency" for the amount of ">100". But we will also need to get the payment frequency for payments between a certain amount x1 and x2 (x1<x<x2). The transaction fee is maximal 100% of the payment. Most important: There is NO Transaction fee if the rounded fee value is less then 0,01 € (fee becomes zero). E.g. for a Transaction fee of 0,005 the value rounds to 0,01 € and the fee is payed. But if the fee is 0,004 it rounds to 0 and there is no fee.
The representation and data structure of the transaction fee is complex. Implicitly or Explicitly there can be a maximum Transaction fee for every amount. Mathematically we have a function with two limited float variables that maps to a float value, the Transaction fee that's between [0,maximal Transaction fee between [0,1]].
The first variable is the unbounded payment amount x between [0,infitite] but we take the highest amount payed by the customer for implementation instead of infinite. The second variable is the payment frequency y limited between [0,1]. The Default value is no Transaction fees at all (0 function) for every user.

Now we have two definition types of the Transaction fee plan for every user. First is as concrete function like "-x*y-0.2" (x=amount,y=payment frequency for payments above the amount) but consider the variables x and y may be dependent. The other definition type is the so called "amount table" where a sequence of succeeding amounts as lower Limits are explicitly defined. It always starts with 0 and has a highest lower Limit like this example: [0,100,250,500,1000,9999].The table is strictly constructed and created with ascendeing values. The first value is always 0 and the default amount table has only this value ([0]). With this amount table 
we have no interval and the "payment frequency" variable does not make sense anymore (edge case). Thus, we define general and global transaction fees for the user by only one single value fee. When adding new and next values to the amount table, we implicitly define intervals between the last table value and the new value.
E.g. with [0,100] we have an amount interval of 100 and when selecting zero, a payment frequency for payments under 100 can be computed. The next value we can add to the table must be bigger (+0,02) than the last current value at the end of the table that is 100 (here). So "x<=100" like 99 is not allowed because it must be at least 100,02. So with the table [0,100,500] we get 3 definition scopes for payment frequency that can be used to set transaction fees which are [0,100]; [100,500] and [500,infinite]. For each of those intervals, we get a 2D function with a limited axis plot. One axis is the payment frequency (horizontal line) for the interval and the transaction fee set for each payment frequency. There is a website to configure such an amount table. This informations help you to understand and figure out the definition logic of the "amount table" sequence.
For the definition of the transaction fee schema for each user we need proper data structures. Most important is when we change the transaction fee plan for a user, it does not effect previous payments but only future payments.

For configuration of the transaction fee we have created a web page as prototype for further development in the file "feePage_logic.html". Develop the config page from this page as orientation. First we need to add this page to the administrator login and panel
because only an administrator can see and set the transaction fees. Create a link from the start page of the backend page to the fee configuration page.

The fee page has the amount table on the right ("fee-table") which has only 0 as first value. The first value cannot be removed but only the last value can be deleted if there are at least two values in the table. Therefore, shift the "€" Symbol to the left and make place for a trash symbol at the right end of the last table element. By pressing the trash symbol, the last table entry will be removed. When removing the table element, the transaction fees are recomputed with the last interval becoming [second last value,infinite] and it take over the fee plan from [second last value, last value] before. What happens if you select a value 't' in the table by clicking: The plot on the left side will show (render) the defined transaction fees for the interval [t,t+1] that can be edited in the plot (more later). The page need to track the highest table value.
Editing and changing value 't' in the fee-table: The values can't be zeros and must be at least 0,02 lower than the following value t+1 but the last value has no limitation.
Creating a new amount value: the new value created is set 10 higher than the predecessor per default.

Now we have a editable plot on the right side of the page. For each interval (loading by click on a table entry), there is an individual different "chart-controls" element with own defined maximal transaction fee, plot and fee settings. The data is saved with each change.
For the interactive plot, we need an abstract "grid" datastructure. Consider different display sizes and window ratios that changes when resized. The user should be able to click at a point on the chart canvas that have always a different pixel coordinate depending on the rendering.
But those pixel coordinates relates to a value on the axis for "payment frequency" and "relative transaction fee" the user wants to set by clicking at this position. Each pixel position must be mapped to a fixed logical grid coordinate. The grid coordinate is mapped to a specific 
payment frequency and a certain relative transaction fee value depending on the "maximal transaction fee" value. With this logic the user can click on a point on the plot canvas he wants to set. This value pair (frequency,fee) is saved temporary. Note that for the same frequency equivalent
to the same x-Pixel coordinate there can only be one value set and clicked so the older one needs to be replaced (change or delete the previous). For instance, if the user click on pixel (5,9) and later on (5,12), both pixels refer to multiple definitions for the same certain payment frequency
the pixel maps to what is not allowed for a function. In this case, overwrite the old definition and the older point disappears from the view. Now the user can define transaction fees for each specific payment frequency just by clicking at the coordinates of the plot.
To define the fees for all frequencies we need one more GUI element. Add a button below the function plot labeled "Regression". After pressing the Button, the real whole values for the actual transaction fees are computed by the regression function.
Here is what the regression function does:
If only one point (x1,x2) is defined, the best function that fits the given configurations is "f(x) = x*((y1-0)/(x1-0))" (make sure you never divide through zero !)
If only two points (x1,y1) and (x2,y2), the best fitting function is "f(x) = x*((y2-y1)/(x2-x1))".
That means, the procedure performs a 2D regression to approximates the function that fits best to the points the user had set.
Use a proper regression algorithm like polynomial regression or a parametric artifical neural network.
This defines the exact transaction fees for every payment frequency in the given amount interval [t,t+1].
Note that the payment frequency varies with the number of transactions of the user.

Next we look at the "formula-box" to define the transaction fee by the "function mode" and not the "amount table mode". When we enter a text to the fee equation text box and press the "evaluate" button, then the following happens:
1. The expression is validated and if it is invalid, a red text appears under the box with "validation failed, please enter a correct formula"
2. If the expression text is correct, the transaction fee is no no longer defined by the "amount table" but by the entered function. That means the chart canvas is cleaned and other fields becomes also cleared. All values in the
amount table exept for 0 diappears and becomes deleted.
3. After Adding a new value to the amount table, the fee equation becomes removed and the fee is again defined by the "amount table".

After implementation completed, update the README.md accordingly.


